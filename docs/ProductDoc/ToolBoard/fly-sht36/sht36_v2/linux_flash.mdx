---
sidebar_position: 7
sidebar_label: 通过Klipper更新Katapult
---

## 准备工作

:::warning

请使用MobaXterm_Personal等SSH工具连接通过WIFI到您的上位机，并且需要确定以下几点

:::

    * 开始更新固件前，请先[连接到SSH](/docs/DebugDoc/BasicTutorial/index.mdx "点击即可跳转") 
    * 请确保登录的用户必须是安装好Klipper的用户
    * 请确保你的输入法是英文
    * 请确保你的上位机可以正常搜索到设备
    * 请确保以上注意事项都做到，否则无法进行下一步
    * 需要保证可以连接上工具板或者能找到工具板的CANID

## 下载固件包

    * 请注意这是固件包，里面只存放了各类固件，不包含编译与固件刷写功能

    ```bash
    cd && git clone https://github.com/FengHua741/FLY_Katapult.git
    ```

    * 如果已经下载过固件包的建议更新固件包后在进行剩下操作

    ```bash
    cd ~/FLY_Katapult && git pull
    ```

## 更新工具板Katapult固件

    * 请注意需要Katapult固件更新原来的Katapult固件需要使用developer目录下的Katapult固件
    * 此方法是直接通过CAN更新工具板原有的Katapult固件

    ```bash
    ~/klippy-env/bin/python ~/klipper/lib/canboot/flash_can.py -f <Update firmware path>  -u <Toolboard ID>
    ```

    * 需要将`<Update firmware path>`替换成固件路径比如 `~/FLY_Katapult/developer/SHT36/FLY_SHT36V2_103_1M.bin`
    * 需要将`<Toolboard ID>`替换成你的工具板ID比如说`72a773244776`请注意一定是对应工具板ID
    * 固件都在`FLY_Katapult\developer\SHT36`下可自行查看，刷写错会导致使用不了
    * 在`FLY_Katapult\developer\SHT36`下的固件其中`SHT36V2`为CAN工具板型号`103`为主控型号`1M`是CAN速率
    * 下方是参考命令

    ```bash
    ~/klippy-env/bin/python ~/klipper/lib/canboot/flash_can.py -f ~/FLY_Katapult/developer/SHT36/FLY_SHT36V2_103_1M.bin  -u 72a773244776
    ```