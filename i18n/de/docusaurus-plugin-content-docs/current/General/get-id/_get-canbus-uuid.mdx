import ImageView from '@site/src/components/ImageView';

import Button from "@mui/material/Button";


## CAN-Konfiguration und ID-Suche

* Wenn Sie CAN verwenden möchten, stellen Sie sicher, dass Ihre Host-Maschine entsprechend konfiguriert ist

----

:::danger Wichtig

Stellen Sie sicher, dass das Motherboard mit der Host-Maschine verbunden ist, bevor Sie die folgenden Schritte ausführen

:::


:::warning

Stellen Sie sicher, dass das CAN-Netzwerk der Host-Maschine, die CAN-Geschwindigkeit des Brücken-Motherboards und die Geschwindigkeit des CAN-Toolboards vollständig übereinstimmen

:::

### Punkte zu beachten vor der Gerätesuche

    * Bevor Sie die CAN-ID suchen, verbinden Sie sich bitte mit SSH ([Verbindung zu SSH](/docs/DebugDoc/BasicTutorial/index.mdx "Klicken Sie hier, um weiterzuleiten"))
    * Bitte beachten Sie, dass Sie über das Netzwerk und nicht über die serielle Schnittstelle zu SSH eingeloggt sein müssen
    * Stellen Sie sicher, dass ein UTOC oder ein Motherboard mit der CAN-Bridge-Firmware verbunden ist und dass das Datenkabel der Host-Maschine Datenübertragungsfähigkeit besitzt

### Gerätesuche

    * Sie sind jetzt erfolgreich bei der Host-Maschine eingeloggt und können `lsusb` eingeben, um nach Geräten zu suchen. Es gibt folgende Szenarien:
        * Wenn beim Eingeben von `lsusb` die Meldung kommt, dass der Befehl `ls` nicht gefunden wurde, können Sie den folgenden Befehl eingeben, um den Befehl zu installieren:
            ```bash
            sudo apt-get install usbutils
            ```
        * Wenn beim Eingeben von `lsusb` nichts passiert, liegt das Problem beim System, und wir können hier nichts tun. Sie müssen das System wechseln oder ein funktionierendes System verwenden
        * Wenn die folgenden Informationen im Bild angezeigt werden, beachten Sie bitte, dass dies nur ein Beispiel ist. Sie müssen nur sicherstellen, dass `1d50:606f` angezeigt wird
            <ImageView image={require('@site/docs/General/get-id/img/606f.png').default} size="100%" align="left" />
    * `1d50:606f` gehört zu dem Gerät, das Sie dieses Mal verwenden. Die nachfolgenden Hinweise müssen Sie nicht beachten, da Systemprobleme dazu führen können, dass diese nicht vollständig angezeigt werden oder gar nicht angezeigt werden
    * Wenn mehrere `1d50:606f` angezeigt werden, wird empfohlen, eines auszuschließen, da dies die nachfolgende Firmware-Programmierung und die Verbindung zur Firmware beeinflussen könnte, wie z.B. beim `FLY MINI PAD`, dann wird empfohlen, das eingebaute UTOC zu verwenden und keine anderen CAN-Brücke-Geräte
    * Wenn nichts angezeigt wird, überprüfen Sie selbst, ob das Datenkabel ordnungsgemäß angeschlossen ist und ob die Firmware korrekt installiert wurde.

:::warning Beachten Sie

Die CAN-ID kann nur gesucht werden, wenn `1d50:606f` vorhanden ist

:::

### CAN-ID suchen

    * Geben Sie den folgenden Befehl ein, um nach der ID zu suchen:
    ```bash
    ~/klippy-env/bin/python ~/klipper/scripts/canbus_query.py can0
    ```
    * Wenn eine ID angezeigt wird und bei `Application:` am Ende `Klipper` steht, kann diese ID direkt verwendet werden
    * Wenn eine ID angezeigt wird und bei `Application:` am Ende `CANBOOT` oder `Katapult` steht, muss die Firmware installiert werden, bevor sie verwendet werden kann
        <ImageView image={require('@site/docs/General/get-id/img/canbus-uuid.png').default} size="50%" align="left" />


### CAN-Probleme Sammlung

    :::danger Wichtig

    * Wenn Sie keine CAN-ID finden können, lesen Sie bitte das folgende Dokument  
    * <Button variant="contained" disableElevation href="/docs/DebugDoc/faq/klipper_can">CAN-Probleme Sammlung</Button>

    :::

### Die CAN-ID in die Konfiguration einfügen

    * Öffnen Sie die Drucker-Weboberfläche, im linken Seitenbereich unter den Konfigurationsoptionen finden Sie: fluidd: `{…}`; mainsail: `Maschine`, klicken Sie darauf, um `printer.cfg` zu finden

        <ImageView image={require('@site/docs/General/get-id/img/fluidd-cfg.png').default} size="50%" align="left" />

    * Kopieren Sie die ermittelte UUID und fügen Sie sie in die Konfiguration `printer.cfg` unter dem Knoten `[mcu]` in `canbus_uuid: ` ein. Speichern und Neustarten, um die Verbindung zum Motherboard herzustellen. Wenn Klipper mitteilt, dass die Firmware aktualisiert werden muss, ADC-Fehler usw. auftritt, bedeutet dies, dass Klipper bereits mit dem Motherboard verbunden ist

        <ImageView image={require('@site/docs/General/get-id/img/canbus-uuid.png').default} size="50%" align="left" />

        :::danger

        Hinweis: Alle in diesem Dokument angezeigten IDs sind Beispiele, die tatsächliche ID jedes Motherboards ist unterschiedlich, bitte passen Sie die ID entsprechend der tatsächlich erhaltenen ID an.

        :::