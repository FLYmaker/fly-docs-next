---
sidebar_position: 1
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import ImageView from '@site/src/components/ImageView';


# Produkteinführung

  FLY-KPPM-Installations- und Ausschaltmodul ist ein Sicherheitsmodul, speziell für Entwicklungsboards wie den Raspberry Pi entwickelt, um Datenverlust bei Stromausfall zu verhindern. Es verwendet fortschrittliche Technologie, die bei einem Stromausfall automatisch auf eine Kapazitätsstromquelle umschaltet, um sicherzustellen, dass das Entwicklungsboard auch bei Stromausfall noch stabil 15 Sekunden lang läuft, um eine sichere Datenspeicherung zu gewährleisten. Es ist klein, handlich und einfach zu installieren.

  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/kppm.png').default} size="100%" align="left" />


## Produkthinweise

  :::danger Hinweis
  Die Eingangsspannung unterstützt nur DC12-24V. Achten Sie beim Anschließen darauf, die Polarität zu beachten. Der Anschluss muss im ausgeschalteten Zustand erfolgen. Überprüfen Sie die Verkabelung sorgfältig, bevor Sie den Strom einschalten; Verluste aufgrund falscher Verkabelung werden nicht von unserem Unternehmen übernommen.
  :::

  :::danger Hinweis
  Der 5V OUT-Anschluss dient als Notstromausgang und ist nicht für die normale Stromversorgung vorgesehen. Bitte verwenden Sie USB-OUT oder SIG/IO zur Stromversorgung des Host-Computers.
  :::

  :::danger Hinweis
  Bei der Verwendung des Sicherheitsabschaltmoduls ist eine Stromversorgung von 12V-24V erforderlich. Um eine ordnungsgemäße Funktion zu gewährleisten, darf die Ausgangsspannung des Sicherheitsabschaltmoduls nicht unter 4,9V liegen. Andernfalls wird das Sicherheitsabschaltmodul die Spannung intern erhöhen, was dazu führt, dass die Kondensatoren ständig aufgeladen bleiben und das Modul ständig heiß wird.
  :::


## Erklärung der Bildschirmanzeige

    | Erklärung der Bildschirmanzeige    |       Linke Erklärung        |     Rechte Parameter          |        Rechte Erklärung      |
    | :------------- | :------------------: | :------------------: | :------------------: |
    | `IN:`            |  Eingangsspannung             |  `OUT:`              |  Ausgangsspannung             |
    | `CA:`            |  Gesamtkondensatorspannung    |  `OI:`               |  Ausgangsbelastungsstrom      |
    | `C1:`            |  Kondensatorspannung C1       |  ` C2:`              |  Kondensatorspannung C2       | 
    | `Temp:`          |  Temperatur des Sicherheitsabschaltmoduls | ` E:`    |  Statusanzeige, siehe unten   | 


    | Anzeigeinhalt        |       Statusbeschreibung      |
    | :------------- | :-----------------: | 
    | ` Ready!`          |  Normaler Start               |
    | ` IN LOW!`         |  Niedrige Eingangsspannung    |
    | ` IN OVR!`         |  Überhöhter Ausgangsstrom     |
    | ` OV LOE!`         |  Zu niedrige Ausgangsspannung |
    | ` OV OVR`          |  Überhöhter Ausgangsstrom     |
    | ` TP OVR!`         |  Überhöhte Temperatur         |
    | ` NONE `           |  Unbekannter Fehler           |
    | ` R: XX Sek `      |  Wenn innerhalb von 10 Sekunden der Strom ausfällt und wieder eingeschaltet wird, wird diese Meldung angezeigt. Nach Ablauf des Countdowns wird der Host-Computer neu gestartet.            |

## Gehäusemodell zum Herunterladen

    ```bash
    https://cdn.mellow.klipper.cn/STEP/KPPM.zip
    ```

## Erklärung der Pins

  * OUT-RST Reset
  * OUT-PDN Ausschalten

  * IN-PIN 

    Standardmäßig hochgezogen, das Modul erkennt bei Einschalten automatisch die letzte Abschaltdauer,
  wenn die Abschaltdauer weniger als 10 Sekunden beträgt, wartet es 10 Sekunden und schaltet dann den 5V-Ausgang einmal ein und aus (um sicherzustellen, dass der Host-Computer heruntergefahren wird und neu gestartet werden kann)
  Wenn an GND angeschlossen, wird die automatische Erkennung der Abschaltdauer deaktiviert.

  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/pins.png').default} size="100%" align="left" />

## FLY-Host-Computer Nutzungsanleitung

  :::info
  Nur für FLY-Pi FLY-Pi-V2 FLY-C8 geeignet
  :::

  Der FLY-Host-Computer muss über SSH die folgenden Befehle ausführen:

  ```bash
  sudo curl -kfSL --progress-bar https://cdn.mellow.klipper.cn/firmware/sun50i-h5-power-key.dtbo -o /boot/dtb/allwinner/overlay/sun50i-h5-power-key.dtbo
  sudo grep -q "^overlays=.*power-key" /boot/FlyOS-Env.txt || sudo sed -i '/^overlays=/ s/$/ power-key/' /boot/FlyOS-Env.txt
  ```

  System neu starten

  ```bash
  sudo reboot
  ```
  
### FLY-Host-Computer Anschlussanleitung

  <Tabs>
      <TabItem value="serial" label="FLY-Host-Computer Anschlussanleitung" default>

          <Tabs>
              <TabItem value="1" label="FLY-C8 5V-Anschluss" default>
                  * FLY-C8 5V-Anschluss

                  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/fly_c8_5v.png').default} size="80%" align="center" />
              </TabItem>
              <TabItem value="2" label="FLY-C8 USB-Anschluss" default>
                  * FLY-C8 USB-Anschluss

                  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/fly_c8_usb.png').default} size="80%" align="center" />
              </TabItem>
              <TabItem value="3" label="FLY-Pi(π) 5V-Anschluss" default>
                  * FLY-Pi 5V-Anschluss

                  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/fly_pi_5v.png').default} size="80%" align="center" />
              </TabItem>
              <TabItem value="4" label="FLY-Pi(π) USB-Anschluss" default>
                  * FLY-Pi USB-Anschluss

                  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/fly_pi_usb.png').default} size="80%" align="center" />
              </TabItem>
              <TabItem value="5" label="FLY-Pi-V2 5V-Anschluss" default>
                  * FLY-Pi-V2 5V-Anschluss

                  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/fly_pi_v2_5v.png').default} size="80%" align="center" />
              </TabItem>
              <TabItem value="6" label="FLY-Pi-V2 USB-Anschluss" default>
                  * FLY-Pi-V2 USB-Anschluss

                  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/fly_pi_v2_usb.png').default} size="80%" align="center" />
              </TabItem>
            
          </Tabs>
      </TabItem>
  </Tabs>

## Raspberry Pi Host-Computer Nutzungsanleitung

  Der Raspberry Pi funktioniert ähnlich wie oben beschrieben. Der Raspberry Pi muss die SD-Karte mit dem Systemimage in den Computer einlegen. Fügen Sie in der Datei config.txt die Zeile `dtoverlay=gpio-shutdown,gpio_pin=21` hinzu und speichern Sie die Datei.

  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/rpi-config.png').default} size="80%" align="left" />

  

  <Tabs>
      <TabItem value="serial" label="Raspberry Pi Host-Computer Anschlussanleitung" default>

          <Tabs>
              <TabItem value="1" label="Raspberry Pi 5V-Anschluss" default>
                  * Raspberry Pi 5V-Anschluss

                  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/pi_5v.png').default} size="80%" align="center" />
              </TabItem>
              <TabItem value="2" label="Raspberry Pi USB-Anschluss" default>
                  * Raspberry Pi USB-Anschluss

                  <ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-kppm/img/pi_usb.png').default} size="80%" align="center" />
              </TabItem>
          </Tabs>
      </TabItem>
  </Tabs>