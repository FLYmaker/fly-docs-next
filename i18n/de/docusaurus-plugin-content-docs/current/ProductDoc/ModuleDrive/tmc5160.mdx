---
sidebar_position: 3
---

import Button from "@mui/material/Button";

import ImageView from '@site/src/components/ImageView';

import DIAG from '@site/i18n/de/docusaurus-plugin-content-docs/current/ProductDoc/ModuleDrive/_diag.mdx';

# TMC 5160

    <ImageView image={require('@site/docs/ProductDoc/ModuleDrive/img/5160.png').default} size="80%" align="center" />

## Grundlegende Parameter

    * Eingangsspannung: 12V-24V
    * Maximaler Strom: 4,4A
    * Geeignet für: Marlin/Klipper/RRF Firmware
    * Unterstützte Antriebsmodi: TMC: SPI
    * Schritt-/Richtungs-Schnittstelle mit Mikroschritt-Interpolation microPlyer
    * Höchste Auflösung von 256 Schritten
    * Unterstützt stealthChop2 für leise Arbeit und flüssige Bewegungen
    * Unterstützt die Dämpfung von Mittelfrequenzresonanzen
    * Unterstützt spreadCycle für dynamische Motorsteuerung
    * Unterstützt dcStep für lastbezogene Geschwindigkeitskontrolle
    * Unterstützt stallGuard2 für präzise sensorgesteuerte Motorlastdetektion
    * Unterstützt coolStep für Stromkontrolle, spart bis zu 75% Energie

## Erklärung der Hauptplatine Jumper

    * TMC5160 verwendet SPI-Jumper
    * Der SPI-Pin des FLY-Antriebs ist der vierte Pin von oben nach unten links. Der CS-Pin ist der SPI-Pin. Wenn die Hauptplatine nicht die entsprechenden Pins hat, kann SPI nicht verwendet werden.
        <ImageView image={require('@site/docs/ProductDoc/ModuleDrive/img/jumper.png').default} size="100%" align="center" />


## TMC5160 Referenz-Konfiguration

    :::danger

    * Der Treiber-Sample-Widerstand ist `sense_resistor: 0.075`, bitte nicht falsch einstellen
    * spi_bus und spi_software können nur eines davon ausgewählt werden
    
    :::

### SPI-Modus Referenz-Konfiguration

    ```cfg
    [tmc5160 stepper_x]
    cs_pin:
    spi_bus:
    # spi_software_mosi_pin:
    # spi_software_miso_pin:
    # spi_software_sclk_pin: 
    run_current: 1.0                    # Motorlaufstromwert
    interpolate: False                  # Mikroschrittinterpolation mit 256 Schritten aktivieren (True für aktiv, False für inaktiv)
    sense_resistor: 0.075
    stealthchop_threshold: 0
    driver_DISS2G: 1
    driver_DISS2VS: 1
    ```

## Unendliche Position Nutzungshinweise

    <DIAG />

    :::tip Hinweise zur Nutzung ohne Endanschläge

    * Dieser Treiber benötigt das Löten des DIAG-Pins, andernfalls kann die Funktion ohne Endanschläge nicht genutzt werden.
    * Der ursprüngliche `endstop_pin:` muss auskommentiert oder gelöscht werden, und `endstop_pin: tmc5160_stepper_x:virtual_endstop` hinzugefügt werden.
    * Nach der Konfiguration von `diag1_pin:` wird der Endanschlagstatus als nicht ausgelöst angezeigt.
    * Die Konfiguration von `driver_SGT:` erfordert Tests für einen geeigneten Wert.

    :::

    * Referenzkonfiguration

    ```cfg
    [stepper_x]
    # endstop_pin:PF3
    endstop_pin: tmc5160_stepper_x:virtual_endstop
    homing_retract_dist: 0        # Rückzug nicht ändern, sonst kann die Heimkehr fehlschlagen

    [tmc5160 stepper_x]
    diag1_pin: ^!
    driver_SGT: 1

    #   Stellen Sie sicher, dass der Endanschlagstatus nach der Konfiguration nicht ausgelöst ist
    #   Dieser Pin verwendet normalerweise das "^" Präfix, um den internen Pull-up zu aktivieren
    #   Die Empfindlichkeit hängt von der Spannung des Riemens ab und muss angepasst werden
    #  (Stellen Sie sicher, dass auch driver_SGTHRS auf einen geeigneten Empfindlichkeitswert eingestellt ist)

    ```