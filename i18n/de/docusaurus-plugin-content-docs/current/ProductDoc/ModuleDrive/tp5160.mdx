---
sidebar_position: 9
---

import ImageView from '@site/src/components/ImageView';

import DIAG from '@site/i18n/de/docusaurus-plugin-content-docs/current/ProductDoc/ModuleDrive/_diag.mdx';

# TP 5160

    <ImageView image={require('@site/docs/ProductDoc/ModuleDrive/img/tp5160.png').default} size="60%" align="center" />

## TMC-5160

    * Eingangsspannung: 12V-48V
    * Maximalstrom: 4.4A
    * Geeignet für: Marlin/Klipper/RRF Firmware
    * Unterstützte Antriebsmodi: TMC：SPI
    * Schritt-/Richtungsschnittstelle mit Mikroschritt-Interpolation microPlyer
    * Höchste Auflösung 256 Mikroschritte
    * Unterstützt stealthChop2 für leisen Betrieb und flüssige Bewegungen
    * Unterstützt Dämpfung von Mittelfrequenzresonanzen
    * Unterstützt spreadCycle für hochdynamische Motorsteuerung
    * Unterstützt dcStep für lastabhängige Geschwindigkeitssteuerung
    * Unterstützt stallGuard2 für hochpräzise sensorlose Motorlast-Erkennung
    * Unterstützt coolStep für Stromkontrolle, mit bis zu 75% Energieeinsparung



## TP5160 Referenzkonfiguration

    :::danger

    * Der Antriebsmusterwiderstand ist `sense_resistor: 0.075`, bitte setzen Sie diesen nicht falsch
    * spi_bus und spi_software können nur eins von beiden gewählt werden
    
    :::

### SPI-Modus Referenzkonfiguration

    ```cfg
    [tmc5160 stepper_x]
    cs_pin:
    spi_bus:
    # spi_software_mosi_pin:
    # spi_software_miso_pin:
    # spi_software_sclk_pin: 
    run_current: 1.0                    # Motorbetriebsstrom
    interpolate: False                  # Aktivierung der 256 Mikroschritte (True für aktiviert, False für deaktiviert)
    sense_resistor: 0.075
    stealthchop_threshold: 0
    driver_DISS2G: 1
    driver_DISS2VS: 1
    ```

## Anleitung zur Verwendung ohne Endschalter

    <DIAG />

    :::tip Tipps zur Nutzung ohne Endschalter
    
    * Zum Einsatz des TP5160 ohne Endschalter muss der DIAG-Jumper auf dem Hauptboard verbunden sein
    * Der ursprüngliche `endstop_pin:` muss auskommentiert oder gelöscht werden, fügen Sie `endstop_pin: tmc5160_stepper_x:virtual_endstop` hinzu
    * Nach der Konfiguration von `diag1_pin:` wird der Endschalterstatus als nicht ausgelöst angezeigt
    * Die Konfiguration von `driver_SGT:` erfordert das Testen eines geeigneten Wertes

    :::

    * Referenzkonfiguration

    ```cfg
    [stepper_x]
    # endstop_pin:PF3
    endstop_pin: tmc5160_stepper_x:virtual_endstop
    homing_retract_dist: 0        # Ein Rückzug, der nicht 0 ist, kann zu Fehlern beim Homing führen

    [tmc5160 stepper_x]
    diag1_pin: ^!
    driver_SGT: 1

    #   Stellen Sie sicher, dass der Endschalterstatus nach der Konfiguration als nicht ausgelöst angezeigt wird
    #   Dieser Pin verwendet normalerweise das "^"-Präfix, um den internen Pull-Up zu aktivieren
    #   Die Empfindlichkeit hängt von der Spannung des Riemens ab und muss angepasst werden
    #   (Stellen Sie sicher, dass auch driver_SGTHRS auf einen geeigneten Wert für die Empfindlichkeit eingestellt ist)

    ```

   
