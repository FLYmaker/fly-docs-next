---
sidebar_position: 9
---



import DIAG from '@site/i18n/ru/docusaurus-plugin-content-docs/current/ProductDoc/ModuleDrive/_diag.mdx';

# TP 5160

    <ImageView image={require('@site/docs/ProductDoc/ModuleDrive/img/tp5160.webp').default} size="60%" align="center" />

## TMC-5160

    * Входное напряжение: 12В-48В
    * Максимальный ток: 4.4А
    * Подходит для: прошивок Marlin/Klipper/RRF
    * Поддерживаемые режимы работы драйвера: TMC: SPI
    * Интерфейс шаг/направление с микрошаговой интерполяцией microPlyer
    * Максимальное разрешение 256 микрошагов
    * Поддержка режима stealthChop2 для тихой работы и плавных движений
    * Поддержка подавления резонанса при средних частотах
    * Поддержка spreadCycle для высокодинамичного управления мотором
    * Поддержка dcStep для управления скоростью в зависимости от нагрузки
    * Поддержка stallGuard2 для высокоточного бесконтактного определения нагрузки мотора
    * Поддержка coolStep для управления током, экономия до 75%



## Справочная конфигурация TP5160

    :::danger

    * Сопротивление выборки драйвера `sense_resistor: 0.075`, пожалуйста, не устанавливайте неправильно
    * spi_bus и spi_software можно выбрать только один из двух

    :::

### Справочная конфигурация режима SPI

    ```cfg
    [tmc5160 stepper_x]
    cs_pin:
    spi_bus:
    # spi_software_mosi_pin:
    # spi_software_miso_pin:
    # spi_software_sclk_pin: 
    run_current: 1.0                    # Значение рабочего тока мотора
    interpolate: False                  # Включить или выключить интерполяцию 256 микрошагов (включено - True, выключено - False)
    sense_resistor: 0.075
    stealthchop_threshold: 0
    driver_DISS2G: 1
    driver_DISS2VS: 1
    ```

## Руководство по использованию безконечных позиций

    <DIAG />

    :::tip Рекомендации по использованию безконечных позиций

    * Для использования безконечных позиций с TP5160 необходимо подключить перемычку DIAG на плате
    * Исходный `endstop_pin:` необходимо закомментировать или удалить, добавив `endstop_pin: tmc5160_stepper_x:virtual_endstop`
    * После настройки `diag1_pin:` состояние концевика должно быть неактивным
    * Значение `driver_SGT:` необходимо самостоятельно настроить на подходящее

    :::

    * Справочная конфигурация

    ```cfg
    [stepper_x]
    # endstop_pin:PF3
    endstop_pin: tmc5160_stepper_x:virtual_endstop
    homing_retract_dist: 0        # Откат при возврате не должен быть изменен на 0, иначе возможны проблемы с возвратом

    [tmc5160 stepper_x]
    diag1_pin: ^!
    driver_SGT: 1

    #   Пожалуйста, убедитесь, что состояние концевика неактивно после настройки
    #   Обычно используется префикс "^" для активации внутренней подтяжки
    #   Чувствительность зависит от натяжения ремня, необходимо самостоятельно настроить
    #  (убедитесь, что driver_SGTHRS также установлен на подходящую чувствительность)

    ```

